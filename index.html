<!DOCTYPE html>
<html lang="gu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ› ï¸ àª•àª¾àª°à«€àª—àª° àª®àª¿àª¤à«àª° â€“ Gujarat</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>

<!-- Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

<style>
body{margin:0;font-family:Arial;background:#f1f5f9}
header{background:#0f172a;color:#fff;padding:15px;text-align:center;font-size:20px}

.card{background:#fff;margin:12px;padding:15px;border-radius:16px;
box-shadow:0 10px 25px rgba(0,0,0,.12)}

input,select,button{
width:100%;padding:12px;margin:6px 0;border-radius:10px;border:1px solid #cbd5e1;
font-size:15px}

button{background:#2563eb;color:white;border:none}

.grid{
display:grid;
grid-template-columns:repeat(2,1fr);
gap:12px;
}

.cat{
height:110px;
border-radius:18px;
color:white;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
font-weight:bold;
font-size:15px;
box-shadow:0 12px 25px rgba(0,0,0,.3);
transform:perspective(600px) rotateX(6deg);
}

.hidden{display:none}

.badge{
background:#16a34a;color:white;
padding:4px 8px;border-radius:8px;font-size:12px
}
</style>
</head>

<body>

<header>ğŸ› ï¸ àª•àª¾àª°à«€àª—àª° àª®àª¿àª¤à«àª° (àª—à«àªœàª°àª¾àª¤)</header>

<!-- LOGIN -->
<div class="card" id="loginCard">
<h3>ğŸ“± OTP Login</h3>
<input id="phone" placeholder="àª®à«‹àª¬àª¾àªˆàª² àª¨àª‚àª¬àª°">
<button onclick="login()">OTP àª®à«‹àª•àª²à«‹</button>
<p style="font-size:13px;color:#555">* OTP System Firebase Auth àª¥à«€ àªœà«‹àª¡àª¾àª¶à«‡</p>
</div>

<!-- CATEGORY -->
<div class="card">
<h3>ğŸ” àª•àª¾àª°à«€àª—àª° àª¶à«‹àª§à«‹</h3>
<div class="grid" id="categoryGrid"></div>
</div>

<!-- WORKER REGISTER -->
<div class="card">
<h3>ğŸ‘¨â€ğŸ”§ àª•àª¾àª°à«€àª—àª° àª¨à«‹àª‚àª§àª£à«€</h3>
<input id="w_name" placeholder="àª¨àª¾àª®">
<select id="w_city">
<option>Ahmedabad</option>
<option>Surat</option>
<option>Vadodara</option>
<option>Rajkot</option>
<option>Rural Area</option>
</select>

<select id="w_category"></select>

<input id="w_lat" placeholder="Latitude">
<input id="w_lng" placeholder="Longitude">

<button onclick="registerWorker()">Register</button>
</div>

<!-- ADMIN -->
<div class="card hidden" id="adminPanel">
<h3>ğŸ›¡ï¸ Admin Panel</h3>
<div id="workerList"></div>
</div>

<script>
// ğŸ”¥ FIREBASE CONFIG
firebase.initializeApp({
apiKey: "AIzaSyCTk0sFvZmY6olGOHwK59z-TYoSSj8_l0o",
authDomain: "karigar-mitra-9c6be.firebaseapp.com",
projectId: "karigar-mitra-9c6be",
});

const db = firebase.firestore();

// ğŸ” ADMIN PASSWORD
const ADMIN_PASSWORD = "19761976";

// ğŸ“‚ CATEGORIES (Gujarati)
const CATEGORIES = [
{n:'àª‡àª²à«‡àª•à«àªŸà«àª°à«€àª¶àª¿àª¯àª¨',i:'bolt',c:'#f59e0b'},
{n:'àªªà«àª²àª®à«àª¬àª°',i:'faucet',c:'#0ea5e9'},
{n:'CCTV àª‡àª¨à«àª¸à«àªŸà«‹àª²à«‡àª¶àª¨',i:'video',c:'#6366f1'},
{n:'àª®àª¾àª² àª¹à«‡àª°àª«à«‡àª°',i:'truck',c:'#f43f5e'},
{n:'àª¸à«àª¥àª¾àª°à«€ àª•àª¾àª®',i:'hammer',c:'#92400e'},
{n:'AC àª°à«€àªªà«‡àª°à«€àª‚àª—',i:'snowflake',c:'#06b6d4'},
{n:'àª®àª¿àª•à«‡àª¨àª¿àª•',i:'wrench',c:'#4b5563'},
{n:'àª•àª®à«àªªà«àª¯à«àªŸàª° àªàª¨à«àªœàª¿.',i:'laptop',c:'#3b82f6'},
{n:'àªªà«‡àª‡àª¨à«àªŸàª¿àª‚àª—',i:'paint-roller',c:'#ec4899'},
{n:'àª¸àª«àª¾àªˆ àª•àª¾àª®',i:'broom',c:'#10b981'},
{n:'àªŸàª¾àªˆàª²à«àª¸ àª•àª¾àª®',i:'th-large',c:'#d946ef'},
{n:'àªµà«‡àª²à«àª¡àª¿àª‚àª—',i:'fire',c:'#ea580c'},
{n:'àªªà«‡àª¸à«àªŸ àª•àª‚àªŸà«àª°à«‹àª²',i:'bug',c:'#84cc16'},
{n:'àªŸà«€àªµà«€ àª°à«€àªªà«‡àª°à«€àª‚àª—',i:'tv',c:'#475569'},
{n:'àª—à«àª²àª¾àª¸ àª«àª¿àªŸàª¿àª‚àª—',i:'window-maximize',c:'#0891b2'},
{n:'àª¬àª¾àª°à«€-àª¬àª¾àª°àª£àª¾',i:'key',c:'#111827'}
];

// ğŸ¨ LOAD CATEGORIES
CATEGORIES.forEach(cat=>{
let d=document.createElement('div');
d.className='cat';
d.style.background=cat.c;
d.innerHTML=`<i class="fa fa-${cat.i} fa-2x"></i><div>${cat.n}</div>`;
d.onclick=()=>alert(cat.n+" àª®àª¾àªŸà«‡ àª•àª¾àª°à«€àª—àª° àª¶à«‹àª§");
categoryGrid.appendChild(d);

let o=document.createElement('option');
o.innerText=cat.n;
w_category.appendChild(o);
});

// ğŸ‘¨â€ğŸ”§ REGISTER WORKER
function registerWorker(){
db.collection("workers").add({
name:w_name.value,
city:w_city.value,
category:w_category.value,
lat:w_lat.value,
lng:w_lng.value,
approved:false
});
alert("Registered! Admin approval pending");
}

// ğŸ›¡ï¸ ADMIN LOGIN
if(prompt("Admin Password?")==ADMIN_PASSWORD){
adminPanel.classList.remove("hidden");
loadWorkers();
}

function loadWorkers(){
db.collection("workers").onSnapshot(snap=>{
workerList.innerHTML="";
snap.forEach(doc=>{
let w=doc.data();
let div=document.createElement("div");
div.className="card";
div.innerHTML=`
<b>${w.name}</b> (${w.category})<br>
<span class="badge">${w.approved?"Approved":"Pending"}</span>
<button onclick="approve('${doc.id}')">Approve</button>
<button onclick="del('${doc.id}')">Delete</button>
`;
workerList.appendChild(div);
});
});
}

function approve(id){
db.collection("workers").doc(id).update({approved:true});
}

function del(id){
db.collection("workers").doc(id).delete();
}

function login(){
alert("OTP Firebase Auth integration ready (Next step)");
}
</script>

</body>
</html>


